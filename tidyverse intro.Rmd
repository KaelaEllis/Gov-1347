---
title: "Tidyverse Intro"
author: "kaela"
date: '2022-09-16'
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r cars}
summary(cars)
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.

```{r}
library(tidyverse)

data <- read.csv("House_General_Elections_all_states_2020 - Sheet1 (1) copy.csv")
#command shift M to get pipeline thingy
data %>% 
  filter(date_received >= "2016-01-01"
         date_received <= "2016-12-31") %>% #similar to subset function
group_by(date_received) %>% #to find the most times a column occurs
  count()

arrange(desc(n)) #arrange by in descending order
```

```{r}
data_wide <- data %>% 
  group_by(year, party) %>% #want it arranged by the unique year and party 
  summarize(avg_poll_usa = mean(average_poll)) %>% 
#want to make some stat from each of these groups is the summarize function
  ungroup() %>% #ungroup after you summarize
  pivot_wider(names_from = "party", values_from = "avg_poll_usa") %>%  #we want more columns
mutate ( diff = democrat -republican) %>%  #makes new column off of calculation #when you pivot longer you could have multiple groups 
  
  data_wide %>% 
  pivot_longer(democrat:diff, names_to = "party", values_to = "avg_poll_diff") # you want to make shorter, rearrange it to make one column into 3 columns #but when you pivot wider the groups are in one column and the numbers are in the other column #the things on either side of the ':' are the the columns who want to include. If you don't want to select certain columns you -c(democrat, republican)

ggplot(aes(x = year, y= avg_poll_diff, color = party)) + geom_line()
```

```{r}
#you have 2 datasets and you want to combine them together 
full_data <- past_elections_state %>% 
  left_join(polls_past_state, by = c("state", "year", "party")) %>% #add column from a difference data set to a new data set
  filter(is.na(average_poll)) #trying to find the missing poll spots
  drop_na() %>%  
```

